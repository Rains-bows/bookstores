import{k as a,n as t,s as e,b as s,w as o,i,o as c,d as n,e as l,f as d,h as r,t as f,F as u,p as h,j as g}from"./index-ClAhF9Bg.js";import{g as m,d as y,u as p,c as _}from"./category.Dg9eA-eh.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./request.QWExmb5c.js";const w=C({data:()=>({categories:[],isEdit:!1,currentId:null,formData:{name:"",description:""}}),onLoad(){this.loadCategories()},onShow(){this.loadCategories()},methods:{async loadCategories(){try{const a=await m();1===a.code&&(this.categories=a.data)}catch(t){a({title:"获取分类列表失败",icon:"none"})}},showAddModal(){t({url:"/pages/category/add"})},handleEdit(a){t({url:`/pages/category/edit?category=${encodeURIComponent(JSON.stringify(a))}`})},async handleDelete(t){e({title:"提示",content:"确定要删除该分类吗？",success:async e=>{if(e.confirm)try{1===(await y(t.id)).code&&(a({title:"删除成功",icon:"success"}),await this.loadCategories())}catch(s){a({title:"删除失败",icon:"none"})}}})},async handleSubmit(){if(this.formData.name.trim())try{let t;t=this.isEdit?await p(this.currentId,this.formData):await _(this.formData),1===t.code&&(a({title:this.isEdit?"更新成功":"添加成功",icon:"success"}),this.loadCategories())}catch(t){console.error("操作失败:",t),a({title:"操作失败",icon:"none"})}else a({title:"请输入分类名称",icon:"none"})}}},[["render",function(a,t,e,m,y,p){const _=h,C=g,w=i;return c(),s(w,{class:"container"},{default:o((()=>[n(_,{class:"add-btn",onClick:p.showAddModal},{default:o((()=>[l("添加分类")])),_:1},8,["onClick"]),n(w,{class:"category-list"},{default:o((()=>[(c(!0),d(u,null,r(y.categories,(a=>(c(),s(w,{key:a.id,class:"category-item"},{default:o((()=>[n(w,{class:"category-info"},{default:o((()=>[n(C,{class:"category-name"},{default:o((()=>[l(f(a.name),1)])),_:2},1024),n(C,{class:"category-desc"},{default:o((()=>[l(f(a.description||"暂无描述"),1)])),_:2},1024)])),_:2},1024),n(w,{class:"category-actions"},{default:o((()=>[n(_,{class:"btn edit-btn",onClick:t=>p.handleEdit(a)},{default:o((()=>[l("编辑")])),_:2},1032,["onClick"]),n(_,{class:"btn delete-btn",onClick:t=>p.handleDelete(a)},{default:o((()=>[l("删除")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})}],["__scopeId","data-v-5fafa571"]]);export{w as default};
