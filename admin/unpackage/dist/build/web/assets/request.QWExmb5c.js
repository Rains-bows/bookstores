import{g as e,m as t,k as n,r as o,U as a}from"./index-ClAhF9Bg.js";const s=s=>new Promise(((i,r)=>{const u=e("token"),d=e("adminAuth"),l=e("userInfo");if(["/products","/categories","/orderDetails"].some((e=>s.url.includes(e)))&&(!d||!u||"admin"!==(null==l?void 0:l.username)))return t("token"),t("userInfo"),t("adminAuth"),n({title:"无权访问管理功能",icon:"none"}),o({url:"/pages/login/login"}),r(new Error("需要管理员权限"));const m={url:"http://lapper.site/api"+s.url,method:s.method||"GET",header:{"Content-Type":"application/json",...u?{Authorization:u}:{},...d?{"X-Admin-Auth":"true"}:{},...s.header},data:s.data};a({...m,success:e=>{200===e.statusCode?i(e.data):401===e.statusCode?(t("token"),t("userInfo"),t("adminAuth"),n({title:"请重新登录",icon:"none"}),o({url:"/pages/login/login"}),r(e)):r(e)},fail:e=>{n({title:"网络请求失败",icon:"none"}),r(e)}})}));export{s as r};
