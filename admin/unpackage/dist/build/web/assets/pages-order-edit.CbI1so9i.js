import{k as e,H as t,v as s,b as a,w as l,i as o,o as d,d as r,e as c,t as n,f as i,h as u,G as f,F as _,j as p,B as m,p as I}from"./index-ClAhF9Bg.js";import{u as h}from"./order.BEdhMf4z.js";import{_ as S}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./request.QWExmb5c.js";const b=S({data:()=>({orderInfo:{},statusList:["已付款","待发货","已发货","已完成"],selectedStatus:""}),onLoad(e){e.orderInfo&&(this.orderInfo=JSON.parse(decodeURIComponent(e.orderInfo)),this.selectedStatus=this.orderInfo.orderStatus)},methods:{handleStatusSelect(e){this.selectedStatus=e},async handleSubmit(){if(this.selectedStatus)if(this.selectedStatus!==this.orderInfo.orderStatus)try{const a=await h(this.orderInfo.orderId,this.selectedStatus);1===a.code?(e({title:"更新成功",icon:"success"}),setTimeout((()=>{const e=t(),a=e[e.length-2];a&&a.$vm.loadOrders(),s()}),1500)):e({title:a.message||"更新失败",icon:"none"})}catch(a){console.error("更新失败:",a),e({title:"更新失败",icon:"none"})}else e({title:"状态未改变",icon:"none"});else e({title:"请选择订单状态",icon:"none"})}}},[["render",function(e,t,s,h,S,b){const v=p,g=o,j=m,k=I;return d(),a(g,{class:"container"},{default:l((()=>[r(g,{class:"order-info"},{default:l((()=>[r(g,{class:"info-item"},{default:l((()=>[r(v,{class:"label"},{default:l((()=>[c("订单号：")])),_:1}),r(v,{class:"value"},{default:l((()=>[c(n(S.orderInfo.orderId),1)])),_:1})])),_:1}),r(g,{class:"info-item"},{default:l((()=>[r(v,{class:"label"},{default:l((()=>[c("下单时间：")])),_:1}),r(v,{class:"value"},{default:l((()=>[c(n(S.orderInfo.createdAt),1)])),_:1})])),_:1}),r(g,{class:"product-info"},{default:l((()=>[r(j,{src:S.orderInfo.productImage,mode:"aspectFill",class:"product-image"},null,8,["src"]),r(g,{class:"product-detail"},{default:l((()=>[r(v,{class:"product-name"},{default:l((()=>[c(n(S.orderInfo.productName),1)])),_:1}),r(v,{class:"product-desc"},{default:l((()=>[c(n(S.orderInfo.productDesc),1)])),_:1}),r(g,{class:"price-info"},{default:l((()=>[r(v,null,{default:l((()=>[c("¥"+n(S.orderInfo.price)+" × "+n(S.orderInfo.quantity),1)])),_:1}),r(v,{class:"total-price"},{default:l((()=>[c("总计：¥"+n(S.orderInfo.totalPrice),1)])),_:1})])),_:1})])),_:1})])),_:1}),r(g,{class:"delivery-info"},{default:l((()=>[r(v,{class:"section-title"},{default:l((()=>[c("收货信息")])),_:1}),r(g,{class:"info-content"},{default:l((()=>[r(v,null,{default:l((()=>[c("收货人："+n(S.orderInfo.recipientName),1)])),_:1}),r(v,null,{default:l((()=>[c("联系电话："+n(S.orderInfo.recipientPhone||"无"),1)])),_:1}),r(v,null,{default:l((()=>[c("收货地址："+n(S.orderInfo.addressDetail),1)])),_:1})])),_:1})])),_:1})])),_:1}),r(g,{class:"status-section"},{default:l((()=>[r(v,{class:"section-title"},{default:l((()=>[c("修改订单状态")])),_:1}),r(g,{class:"status-list"},{default:l((()=>[(d(!0),i(_,null,u(S.statusList,((e,t)=>(d(),a(g,{key:t,class:f(["status-item",S.selectedStatus===e?"active":""]),onClick:t=>b.handleStatusSelect(e)},{default:l((()=>[c(n(e),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),r(k,{class:"submit-btn",onClick:b.handleSubmit},{default:l((()=>[c("保存修改")])),_:1},8,["onClick"])])),_:1})}],["__scopeId","data-v-acb9ced9"]]);export{b as default};
