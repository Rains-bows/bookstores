import{k as a,a as t,b as e,w as s,i as l,o as r,d as i,f as o,h as n,e as u,t as d,O as m,F as c,G as f,j as h}from"./index-ClAhF9Bg.js";import{_ as p}from"./_plugin-vue_export-helper.BCo6x5W8.js";const v=p({data:()=>({statusData:[{label:"CPU使用率",icon:"stats-bars",value:25},{label:"内存占用",icon:"piegraph",value:45},{label:"磁盘空间",icon:"harddrive",value:65}],servers:[],formData:{name:"",ip:""},simulationTimer:null}),mounted(){this.initDemoData(),this.startDataSimulation()},beforeDestroy(){clearInterval(this.simulationTimer)},methods:{initDemoData(){this.servers=[{id:1,name:"核心数据库",ip:"192.168.1.101",status:"online",cpu:28.5,ram:62.3,disk:45.7},{id:2,name:"备份服务器",ip:"192.168.1.102",status:"offline",cpu:0,ram:0,disk:0}]},startDataSimulation(){this.simulationTimer=setInterval((()=>{this.statusData=this.statusData.map((a=>{const t=Number(a.value)||0,e=4*Math.random()-2,s=Math.min(100,Math.max(0,t+e));return{...a,value:s}})),this.servers=this.servers.map((a=>{try{const t=Math.random()<.98?"online":"offline";return{...a,status:t,cpu:this.calcServerMetric(a.cpu,20,80),ram:this.calcServerMetric(a.ram,30,70),disk:this.calcServerMetric(a.disk,10,90)}}catch(t){return console.error("服务器状态更新错误:",t),a}}))}),1500)},calcServerMetric(a,t,e){const s=a||t,l=5*Math.random()-2.5;return Math.min(e,Math.max(t,s+l))},getStatusColor(a){const t=Number(a);return t>85?"#ff4d4f":t>65?"#faad14":"#52c41a"},showAddForm(){this.formData={name:"",ip:""},this.$refs.addForm.open()},addServer(){if(!this.formData.name||!this.formData.ip)return void a({title:"请填写完整信息",icon:"none"});const t={cpu:20*Math.random()+20,ram:30*Math.random()+30,disk:20*Math.random()+40};this.servers.push({id:Date.now(),...this.formData,...t,status:Math.random()>.1?"online":"offline"}),this.$refs.addForm.close(),a({title:"服务器添加成功"})}}},[["render",function(a,p,v,_,D,b){const g=t("uni-icons"),M=h,k=l,y=t("uni-grid-item"),S=t("uni-grid"),C=t("uni-list-item"),x=t("uni-list"),F=t("uni-easyinput"),V=t("uni-forms-item"),w=t("uni-forms"),I=t("uni-popup-dialog"),U=t("uni-popup");return r(),e(k,{class:"monitor-container"},{default:s((()=>[i(S,{column:3,highlight:!1,class:"status-grid"},{default:s((()=>[(r(!0),o(c,null,n(D.statusData,((a,t)=>(r(),e(y,{key:t},{default:s((()=>[i(k,{class:"status-card"},{default:s((()=>[i(k,{class:"metric-header"},{default:s((()=>[i(g,{type:a.icon,color:b.getStatusColor(a.value),size:"30"},null,8,["type","color"]),i(M,{class:"metric-title"},{default:s((()=>[u(d(a.label),1)])),_:2},1024)])),_:2},1024),i(M,{class:"metric-value"},{default:s((()=>[u(d(Number(a.value).toFixed(1))+"%",1)])),_:2},1024),i(k,{class:"progress-bar"},{default:s((()=>[i(k,{class:"progress-inner",style:m({width:a.value+"%",backgroundColor:b.getStatusColor(a.value)})},null,8,["style"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),i(k,{class:"server-list"},{default:s((()=>[i(k,{class:"list-header"},{default:s((()=>[i(M,{class:"title"},{default:s((()=>[u("服务器列表")])),_:1}),i(g,{type:"plus",size:"28",color:"#6366f1",onClick:b.showAddForm},null,8,["onClick"])])),_:1}),i(x,null,{default:s((()=>[(r(!0),o(c,null,n(D.servers,(a=>(r(),e(C,{key:a.id,title:a.name,note:a.ip},{footer:s((()=>[i(k,{class:"status-container"},{default:s((()=>[i(k,{class:f(["status-indicator",a.status])},null,8,["class"]),i(M,{class:f(["status-text",a.status])},{default:s((()=>[u(d(a.status.toUpperCase()),1)])),_:2},1032,["class"])])),_:2},1024)])),_:2},1032,["title","note"])))),128))])),_:1})])),_:1}),i(U,{ref:"addForm",type:"dialog"},{default:s((()=>[i(I,{mode:"input",title:"添加服务器",value:D.formData,onConfirm:b.addServer},{default:s((()=>[i(k,{class:"form-content"},{default:s((()=>[i(w,{model:D.formData},{default:s((()=>[i(V,{label:"服务器名称"},{default:s((()=>[i(F,{modelValue:D.formData.name,"onUpdate:modelValue":p[0]||(p[0]=a=>D.formData.name=a),placeholder:"请输入名称"},null,8,["modelValue"])])),_:1}),i(V,{label:"IP地址"},{default:s((()=>[i(F,{modelValue:D.formData.ip,"onUpdate:modelValue":p[1]||(p[1]=a=>D.formData.ip=a),placeholder:"请输入IP"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1})])),_:1},8,["value","onConfirm"])])),_:1},512)])),_:1})}],["__scopeId","data-v-3a34fbec"]]);export{v as default};
