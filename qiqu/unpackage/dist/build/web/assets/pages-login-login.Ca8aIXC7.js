import{_ as e,a as s,b as a,c as o,n as t,d as r,w as l,i as n,o as d,e as u,f as i,I as c,A as m,k as f}from"./index-DfJFPZaM.js";import{l as p}from"./user.C6GM3hFr.js";import"./request.D0Ryayp7.js";const g=e({data:()=>({form:{username:"",password:""}}),methods:{async handleLogin(){if(this.form.username&&this.form.password)try{const e=await p(this.form);if(console.log("登录响应:",e),1===e.code&&e.data){const{token:t,userId:r,username:l}=e.data;a("token",t),a("userInfo",{id:r,username:l}),s({title:"登录成功",icon:"success"}),setTimeout((()=>{o({url:"/pages/user/user"})}),1500)}else s({title:e.message||"登录失败",icon:"none"})}catch(e){console.error("登录失败:",e),s({title:"登录失败",icon:"none"})}else s({title:"请输入用户名和密码",icon:"none"})},goRegister(){t({url:"/pages/register/register"})},goResetPassword(){t({url:"/pages/reset-password/reset-password"})}}},[["render",function(e,s,a,o,t,p){const g=c,w=n,_=m,h=f;return d(),r(w,{class:"container"},{default:l((()=>[u(w,{class:"form"},{default:l((()=>[u(w,{class:"input-group"},{default:l((()=>[u(g,{type:"text",modelValue:t.form.username,"onUpdate:modelValue":s[0]||(s[0]=e=>t.form.username=e),placeholder:"请输入用户名"},null,8,["modelValue"])])),_:1}),u(w,{class:"input-group"},{default:l((()=>[u(g,{type:"password",modelValue:t.form.password,"onUpdate:modelValue":s[1]||(s[1]=e=>t.form.password=e),placeholder:"请输入密码"},null,8,["modelValue"])])),_:1}),u(_,{class:"login-btn",onClick:p.handleLogin},{default:l((()=>[i("登录")])),_:1},8,["onClick"]),u(w,{class:"actions"},{default:l((()=>[u(h,{onClick:p.goRegister},{default:l((()=>[i("注册账号")])),_:1},8,["onClick"]),u(h,{onClick:p.goResetPassword},{default:l((()=>[i("忘记密码")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-894937ba"]]);export{g as default};
