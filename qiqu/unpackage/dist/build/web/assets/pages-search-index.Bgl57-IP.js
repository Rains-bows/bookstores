import{_ as e,a,n as s,D as o,d as t,w as l,i as c,o as i,e as r,f as d,v as n,h as u,j as p,F as h,I as f,k,t as m,p as g}from"./index-DfJFPZaM.js";import{s as y}from"./search.B9V6XwV1.js";import"./request.D0Ryayp7.js";const _=e({data:()=>({keyword:"",products:[],loading:!1,page:1,size:10}),methods:{async handleSearch(){const e=this.keyword.trim();if(e){this.loading=!0;try{const s=await y(e,this.page,this.size);if(console.log("搜索参数:",{keyword:e,page:this.page,size:this.size}),1!==s.code)throw new Error(s.msg||"搜索失败");this.products=s.data||[],0===this.products.length&&a({title:"暂无相关商品",icon:"none"})}catch(s){console.error("搜索失败:",s),a({title:s.message||"搜索失败",icon:"none"})}finally{this.loading=!1}}else a({title:"请输入搜索关键词",icon:"none"})},clearKeyword(){this.keyword="",this.products=[]},goDetail(e){s({url:`/pages/product/detail?id=${e}`})},goBack(){o()}}},[["render",function(e,a,s,o,y,_){const w=f,C=k,j=c,x=g;return i(),t(j,{class:"container"},{default:l((()=>[r(j,{class:"search-box"},{default:l((()=>[r(j,{class:"input-wrap"},{default:l((()=>[r(w,{type:"text",modelValue:y.keyword,"onUpdate:modelValue":a[0]||(a[0]=e=>y.keyword=e),placeholder:"请输入商品名称",onConfirm:_.handleSearch,"confirm-type":"search",class:"search-input"},null,8,["modelValue","onConfirm"]),y.keyword?(i(),t(C,{key:0,class:"clear-icon",onClick:_.clearKeyword},{default:l((()=>[d("×")])),_:1},8,["onClick"])):n("",!0)])),_:1}),r(C,{class:"search-btn",onClick:_.handleSearch},{default:l((()=>[d("搜索")])),_:1},8,["onClick"]),r(C,{class:"cancel",onClick:_.goBack},{default:l((()=>[d("取消")])),_:1},8,["onClick"])])),_:1}),y.products.length>0?(i(),t(j,{key:0,class:"product-list"},{default:l((()=>[(i(!0),u(h,null,p(y.products,(e=>(i(),t(j,{class:"product-item",key:e.id,onClick:a=>_.goDetail(e.id)},{default:l((()=>[r(x,{src:e.image,mode:"aspectFill",class:"product-image"},null,8,["src"]),r(j,{class:"product-info"},{default:l((()=>[r(C,{class:"product-name"},{default:l((()=>[d(m(e.name),1)])),_:2},1024),r(C,{class:"product-price"},{default:l((()=>[d("¥"+m(e.price),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):y.keyword&&!y.loading?(i(),t(j,{key:1,class:"empty"},{default:l((()=>[r(C,null,{default:l((()=>[d("暂无相关商品")])),_:1})])),_:1})):n("",!0)])),_:1})}],["__scopeId","data-v-92656175"]]);export{_ as default};
