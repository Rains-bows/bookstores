import{_ as s,a,n as e,z as t,x as n,B as o,y as c,u as l,C as i,d as u,w as r,i as d,o as f,e as m,f as g,t as _,h as p,j as h,F as k,p as C,k as I,m as v,v as y}from"./index-DfJFPZaM.js";import{g as T}from"./user.C6GM3hFr.js";import"./request.D0Ryayp7.js";const b=s({data:()=>({userInfo:{id:"",username:"",nickname:"",avatar:""},orderTypes:[{icon:"/images/home.png",name:"待付款",status:"待付款",count:0},{icon:"icon-box",name:"待发货",status:"待发货",count:0},{icon:"icon-truck",name:"已发货",status:"已发货",count:0},{icon:"icon-comment",name:"已完成",status:"已完成",count:0}]}),onShow(){this.loadUserInfo()},methods:{async loadUserInfo(){try{const s=await T();if(1!==s.code)throw new Error(s.message||"获取用户信息失败");this.userInfo={...this.userInfo,...s.data}}catch(s){console.error("获取用户信息失败:",s),a({title:s.message||"获取用户信息失败",icon:"none"})}},navigateTo(s){e({url:s})},clearCache(){t({title:"提示",content:"确定要清理缓存吗？",success:s=>{if(s.confirm){n({title:"清理中"});try{o(),setTimeout((()=>{c(),a({title:"清理成功",icon:"success"})}),1e3)}catch(e){c(),a({title:"清理失败",icon:"none"})}}}})},handleLogout(){t({title:"提示",content:"确定要退出登录吗？",success:s=>{s.confirm&&(l("token"),l("userInfo"),i({url:"/pages/login/login"}))}})}}},[["render",function(s,a,e,t,n,o){const c=C,l=I,i=d;return f(),u(i,{class:"container"},{default:r((()=>[m(i,{class:"user-info"},{default:r((()=>[m(c,{class:"bg",src:"/assets/user-bg-DzB5UUJn.jpg",mode:"aspectFill"}),m(i,{class:"content"},{default:r((()=>[m(c,{class:"avatar",src:n.userInfo.avatar||"/static/images/default_male.jpeg",mode:"aspectFill"},null,8,["src"]),m(i,{class:"info"},{default:r((()=>[m(l,{class:"nickname"},{default:r((()=>[g(_(n.userInfo.nickname||n.userInfo.username),1)])),_:1}),m(l,{class:"id"},{default:r((()=>[g("ID: "+_(n.userInfo.id),1)])),_:1})])),_:1})])),_:1})])),_:1}),m(i,{class:"order-card"},{default:r((()=>[m(i,{class:"header",onClick:a[0]||(a[0]=s=>o.navigateTo("/pages/order/list?status="))},{default:r((()=>[m(l,{class:"title"},{default:r((()=>[g("我的订单")])),_:1}),m(i,{class:"more"},{default:r((()=>[m(l,null,{default:r((()=>[g("查看全部")])),_:1}),m(l,{class:"iconfont icon-right"})])),_:1})])),_:1}),m(i,{class:"order-types"},{default:r((()=>[(f(!0),p(k,null,h(n.orderTypes,((s,a)=>(f(),u(i,{class:"type-item",key:a,onClick:a=>o.navigateTo(`/pages/order/list?status=${s.status}`)},{default:r((()=>[m(i,{class:"icon-wrap"},{default:r((()=>[m(l,{class:v(["iconfont",s.icon])},null,8,["class"]),s.count>0?(f(),u(l,{key:0,class:"badge"},{default:r((()=>[g(_(s.count),1)])),_:2},1024)):y("",!0)])),_:2},1024),m(l,{class:"name"},{default:r((()=>[g(_(s.name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),m(i,{class:"menu-list"},{default:r((()=>[m(i,{class:"menu-group"},{default:r((()=>[m(i,{class:"menu-item",onClick:a[1]||(a[1]=s=>o.navigateTo("/pages/address/list"))},{default:r((()=>[m(l,{class:"iconfont icon-location"}),m(l,{class:"title"},{default:r((()=>[g("收货地址")])),_:1}),m(l,{class:"iconfont icon-right"})])),_:1}),m(i,{class:"menu-item",onClick:a[2]||(a[2]=s=>o.navigateTo("/pages/about/index"))},{default:r((()=>[m(l,{class:"iconfont icon-info"}),m(l,{class:"title"},{default:r((()=>[g("关于我们")])),_:1}),m(l,{class:"iconfont icon-right"})])),_:1}),m(i,{class:"menu-item",onClick:o.clearCache},{default:r((()=>[m(l,{class:"iconfont icon-clear"}),m(l,{class:"title"},{default:r((()=>[g("清理缓存")])),_:1}),m(l,{class:"iconfont icon-right"})])),_:1},8,["onClick"])])),_:1})])),_:1}),m(i,{class:"logout-btn",onClick:o.handleLogout},{default:r((()=>[g("退出登录")])),_:1},8,["onClick"])])),_:1})}],["__scopeId","data-v-104df2e0"]]);export{b as default};
