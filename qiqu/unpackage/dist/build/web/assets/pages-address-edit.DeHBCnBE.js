import{_ as e,g as s,a,D as t,d as o,w as l,i,o as d,e as n,f as r,k as m,I as c,O as u,A as f}from"./index-DfJFPZaM.js";import{a as h,u as p,b as _}from"./address.C_JEwSJw.js";import"./request.D0Ryayp7.js";const b=e({data:()=>({form:{recipientName:"",phone:"",address:"",userId:""},id:null}),onLoad(e){e.id&&(this.id=e.id,this.getDetail());const a=s("userInfo");a&&(this.form.userId=a.id)},methods:{async getDetail(){try{const e=await h(this.id);1===e.code?this.form=e.data||{}:a({title:e.message||"获取地址详情失败",icon:"none"})}catch(e){console.error("获取地址详情失败:",e),a({title:"获取地址详情失败",icon:"none"})}},async handleSubmit(){if(this.form.recipientName)if(this.form.phone)if(this.form.address)try{const e=this.id?p:_,s=await e(this.form);1===s.code?(a({title:this.id?"修改成功":"添加成功",icon:"success"}),setTimeout((()=>{t()}),1500)):a({title:s.message||(this.id?"修改失败":"添加失败"),icon:"none"})}catch(e){console.error("保存地址失败:",e),a({title:this.id?"修改失败":"添加失败",icon:"none"})}else a({title:"请输入详细地址",icon:"none"});else a({title:"请输入手机号码",icon:"none"});else a({title:"请输入收货人姓名",icon:"none"})}}},[["render",function(e,s,a,t,h,p){const _=m,b=c,V=i,y=u,g=f;return d(),o(V,{class:"container"},{default:l((()=>[n(V,{class:"form"},{default:l((()=>[n(V,{class:"form-item"},{default:l((()=>[n(_,{class:"label"},{default:l((()=>[r("收货人")])),_:1}),n(b,{type:"text",modelValue:h.form.recipientName,"onUpdate:modelValue":s[0]||(s[0]=e=>h.form.recipientName=e),placeholder:"请输入收货人姓名"},null,8,["modelValue"])])),_:1}),n(V,{class:"form-item"},{default:l((()=>[n(_,{class:"label"},{default:l((()=>[r("手机号码")])),_:1}),n(b,{type:"number",modelValue:h.form.phone,"onUpdate:modelValue":s[1]||(s[1]=e=>h.form.phone=e),placeholder:"请输入手机号码"},null,8,["modelValue"])])),_:1}),n(V,{class:"form-item"},{default:l((()=>[n(_,{class:"label"},{default:l((()=>[r("详细地址")])),_:1}),n(y,{modelValue:h.form.address,"onUpdate:modelValue":s[2]||(s[2]=e=>h.form.address=e),placeholder:"请输入详细地址"},null,8,["modelValue"])])),_:1})])),_:1}),n(g,{class:"submit-btn",onClick:p.handleSubmit},{default:l((()=>[r("保存")])),_:1},8,["onClick"])])),_:1})}],["__scopeId","data-v-70d6e9e7"]]);export{b as default};
