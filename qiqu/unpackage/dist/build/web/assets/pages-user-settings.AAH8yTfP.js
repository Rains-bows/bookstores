import{_ as t,a as s,g as e,n as a,b as l,z as i,x as n,y as o,u as c,C as u,d as f,w as d,i as r,o as g,e as h,f as _,t as m,p,k as C,P as k}from"./index-DfJFPZaM.js";import{g as v}from"./user.C6GM3hFr.js";import"./request.D0Ryayp7.js";const b=t({data:()=>({userInfo:{username:"",phone:"",email:"",avatar:"",nickname:""},notificationEnabled:!0,soundEnabled:!0,cacheSize:"0MB"}),onShow(){this.loadUserInfo(),this.loadSettings(),this.calculateCacheSize()},methods:{async loadUserInfo(){try{const t=await v();if(1!==t.code)throw new Error(t.message||"获取用户信息失败");this.userInfo={...this.userInfo,...t.data}}catch(t){console.error("获取用户信息失败:",t),s({title:t.message||"获取用户信息失败",icon:"none"})}},loadSettings(){const t=e("settings")||{};this.notificationEnabled=!1!==t.notification,this.soundEnabled=!1!==t.sound},calculateCacheSize(){setTimeout((()=>{this.cacheSize="2.5MB"}),500)},navigateTo(t){a({url:t})},toggleNotification(t){this.notificationEnabled=t.detail.value,this.saveSettings()},toggleSound(t){this.soundEnabled=t.detail.value,this.saveSettings()},saveSettings(){const t={notification:this.notificationEnabled,sound:this.soundEnabled};l("settings",t)},clearCache(){i({title:"提示",content:"确定要清除缓存吗？",success:t=>{t.confirm&&(n({title:"清理中"}),setTimeout((()=>{o(),this.cacheSize="0MB",s({title:"清除成功",icon:"success"})}),1e3))}})},handleLogout(){i({title:"提示",content:"确定要退出登录吗？",success:t=>{t.confirm&&(c("userInfo"),c("token"),c("settings"),u({url:"/pages/login/index"}))}})}}},[["render",function(t,s,e,a,l,i){const n=p,o=r,c=C,u=k;return g(),f(o,{class:"container"},{default:d((()=>[h(o,{class:"header-bg"},{default:d((()=>[h(n,{src:"/static/images/settings-bg.png",mode:"aspectFill"})])),_:1}),h(o,{class:"user-card"},{default:d((()=>[h(n,{src:l.userInfo.avatar||"/static/images/default-avatar.png",class:"avatar",mode:"aspectFill"},null,8,["src"]),h(o,{class:"info"},{default:d((()=>[h(c,{class:"nickname"},{default:d((()=>[_(m(l.userInfo.nickname||l.userInfo.username),1)])),_:1}),h(c,{class:"username"},{default:d((()=>[_("账号："+m(l.userInfo.username),1)])),_:1})])),_:1})])),_:1}),h(o,{class:"settings-list"},{default:d((()=>[h(o,{class:"settings-group"},{default:d((()=>[h(o,{class:"group-title"},{default:d((()=>[_("个人资料")])),_:1}),h(o,{class:"settings-item",onClick:s[0]||(s[0]=t=>i.navigateTo("/pages/user/profile"))},{default:d((()=>[h(o,{class:"item-left"},{default:d((()=>[h(c,{class:"iconfont icon-user"}),h(c,null,{default:d((()=>[_("个人信息")])),_:1})])),_:1}),h(o,{class:"item-right"},{default:d((()=>[h(c,{class:"hint"},{default:d((()=>[_("修改头像、昵称等")])),_:1}),h(c,{class:"iconfont icon-right"})])),_:1})])),_:1}),h(o,{class:"settings-item",onClick:s[1]||(s[1]=t=>i.navigateTo("/pages/address/list"))},{default:d((()=>[h(o,{class:"item-left"},{default:d((()=>[h(c,{class:"iconfont icon-location"}),h(c,null,{default:d((()=>[_("收货地址")])),_:1})])),_:1}),h(o,{class:"item-right"},{default:d((()=>[h(c,{class:"iconfont icon-right"})])),_:1})])),_:1})])),_:1}),h(o,{class:"settings-group"},{default:d((()=>[h(o,{class:"group-title"},{default:d((()=>[_("安全设置")])),_:1}),h(o,{class:"settings-item",onClick:s[2]||(s[2]=t=>i.navigateTo("/pages/user/password"))},{default:d((()=>[h(o,{class:"item-left"},{default:d((()=>[h(c,{class:"iconfont icon-lock"}),h(c,null,{default:d((()=>[_("修改密码")])),_:1})])),_:1}),h(o,{class:"item-right"},{default:d((()=>[h(c,{class:"iconfont icon-right"})])),_:1})])),_:1}),h(o,{class:"settings-item",onClick:s[3]||(s[3]=t=>i.navigateTo("/pages/user/phone"))},{default:d((()=>[h(o,{class:"item-left"},{default:d((()=>[h(c,{class:"iconfont icon-phone"}),h(c,null,{default:d((()=>[_("绑定手机")])),_:1})])),_:1}),h(o,{class:"item-right"},{default:d((()=>[h(c,{class:"hint"},{default:d((()=>[_(m(l.userInfo.phone||"未绑定"),1)])),_:1}),h(c,{class:"iconfont icon-right"})])),_:1})])),_:1}),h(o,{class:"settings-item",onClick:s[4]||(s[4]=t=>i.navigateTo("/pages/user/email"))},{default:d((()=>[h(o,{class:"item-left"},{default:d((()=>[h(c,{class:"iconfont icon-email"}),h(c,null,{default:d((()=>[_("绑定邮箱")])),_:1})])),_:1}),h(o,{class:"item-right"},{default:d((()=>[h(c,{class:"hint"},{default:d((()=>[_(m(l.userInfo.email||"未绑定"),1)])),_:1}),h(c,{class:"iconfont icon-right"})])),_:1})])),_:1})])),_:1}),h(o,{class:"settings-group"},{default:d((()=>[h(o,{class:"group-title"},{default:d((()=>[_("通知设置")])),_:1}),h(o,{class:"settings-item"},{default:d((()=>[h(o,{class:"item-left"},{default:d((()=>[h(c,{class:"iconfont icon-notification"}),h(c,null,{default:d((()=>[_("推送通知")])),_:1})])),_:1}),h(o,{class:"item-right"},{default:d((()=>[h(u,{checked:l.notificationEnabled,onChange:i.toggleNotification,color:"#FE8C00"},null,8,["checked","onChange"])])),_:1})])),_:1}),h(o,{class:"settings-item"},{default:d((()=>[h(o,{class:"item-left"},{default:d((()=>[h(c,{class:"iconfont icon-sound"}),h(c,null,{default:d((()=>[_("声音提醒")])),_:1})])),_:1}),h(o,{class:"item-right"},{default:d((()=>[h(u,{checked:l.soundEnabled,onChange:i.toggleSound,color:"#FE8C00"},null,8,["checked","onChange"])])),_:1})])),_:1})])),_:1}),h(o,{class:"settings-group"},{default:d((()=>[h(o,{class:"group-title"},{default:d((()=>[_("其他设置")])),_:1}),h(o,{class:"settings-item",onClick:i.clearCache},{default:d((()=>[h(o,{class:"item-left"},{default:d((()=>[h(c,{class:"iconfont icon-clear"}),h(c,null,{default:d((()=>[_("清除缓存")])),_:1})])),_:1}),h(o,{class:"item-right"},{default:d((()=>[h(c,{class:"hint"},{default:d((()=>[_(m(l.cacheSize),1)])),_:1}),h(c,{class:"iconfont icon-right"})])),_:1})])),_:1},8,["onClick"]),h(o,{class:"settings-item",onClick:s[5]||(s[5]=t=>i.navigateTo("/pages/about/index"))},{default:d((()=>[h(o,{class:"item-left"},{default:d((()=>[h(c,{class:"iconfont icon-info"}),h(c,null,{default:d((()=>[_("关于我们")])),_:1})])),_:1}),h(o,{class:"item-right"},{default:d((()=>[h(c,{class:"iconfont icon-right"})])),_:1})])),_:1})])),_:1}),h(o,{class:"logout-btn",onClick:i.handleLogout},{default:d((()=>[_(" 退出登录 ")])),_:1},8,["onClick"])])),_:1})])),_:1})}],["__scopeId","data-v-a049c51c"]]);export{b as default};
